((self||this).webpackJsonp=(self||this).webpackJsonp||[]).push([[1],{100:function(n,t,e){"use strict";e.d(t,"g",function(){return y}),e.d(t,"f",function(){return h}),e.d(t,"b",function(){return w}),e.d(t,"d",function(){return P}),e.d(t,"a",function(){return O}),e.d(t,"e",function(){return T}),e.d(t,"c",function(){return C});var r,a=e(10),u=e.n(a),i=e(41),o=e.n(i),p=e(63),s=e.n(p),c=e(91),l=e(51),f=function(){return"true"===localStorage.getItem("integrationTest")},d=function(){var n=s()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.all([e.e(16),e.e(7)]).then(e.bind(null,1408)).then(function(n){return n.default}));case 1:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),m=function(){var n=s()(o.a.mark(function n(){var t;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!f()){n.next=2;break}return n.abrupt("return");case 2:if(!r){n.next=4;break}return n.abrupt("return",r);case 4:return n.next=6,d();case 6:return(t=n.sent).apps.length<1&&t.initializeApp(window.__firestore.config),n.abrupt("return",t.auth().signInWithCustomToken(window.__firestore.token).then(function(){return t.firestore().settings({}),r=t.firestore()}));case 9:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),g=function(){var n=s()(o.a.mark(function n(t){var e;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m();case 2:return e=n.sent,n.abrupt("return",e.doc("users/".concat(t.hashid)));case 4:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}(),v=function(n,t){return u()({__typename:l.a.USER,id:n.hashid,featureNotifications:[]},t)},y=function(){var n=s()(o.a.mark(function n(t,e){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!f()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,g(t);case 4:n.sent.onSnapshot(function(n){e(v(t,n.data()))});case 6:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}(),h=function(){var n=s()(o.a.mark(function n(t,e){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!f()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,m();case 4:return r=n.sent,n.abrupt("return",r.collection("users/".concat(t.hashid,"/pins")).onSnapshot(function(n){var t=[];n.forEach(function(n){var e=n.data();t.push(u()({},e))}),e(t)}));case 6:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}(),I=function(){var n=s()(o.a.mark(function n(t,e){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m();case 2:return r=n.sent,n.abrupt("return",r.doc("users/".concat(t.hashid,"/pins/").concat(e)));case 4:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}(),w=function(){var n=s()(o.a.mark(function n(t,e){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!f()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,I(t,e.id);case 4:n.sent.set(e);case 6:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}(),P=function(){var n=s()(o.a.mark(function n(t,e){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!f()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,I(t,e);case 4:n.sent.delete();case 6:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}(),O=function(){var n=s()(o.a.mark(function n(t,e){var r,a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!f()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,g(t);case 4:return r=n.sent,n.next=7,d();case 7:a=n.sent,r.set({__typename:l.a.USER,id:t.hashid,featureNotifications:a.firestore.FieldValue.arrayUnion(e),updatedAt:Object(c.c)()},{merge:!0});case 9:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}(),S=function(){var n=s()(o.a.mark(function n(t){var e;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m();case 2:return e=n.sent,n.abrupt("return",e.doc("items/".concat(t)));case 4:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}(),_=function(n,t,e){if("string"!=typeof n)throw"Invalid ID ".concat(n);if("string"!=typeof t)throw"Invalid ID ".concat(t);if(""===n||""===t)throw"Invalid values: ".concat(n,", ").concat(t);if(0===Object.keys(e).length)throw"Invalid attributes"},b=function(n,t,e){return r=u()({},e,{id:n,ownerId:t,updatedAt:Object(c.c)()}),JSON.parse(JSON.stringify(r));var r},T=function(){var n=s()(o.a.mark(function n(t,e,r){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(!f()){n.next=4;break}return n.abrupt("return");case 4:d().then(s()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return _(t,e,r),n.next=3,S(t);case 3:n.sent.set(b(t,e,r),{merge:!0});case 5:case"end":return n.stop()}},n)})));case 5:case"end":return n.stop()}},n)}));return function(t,e,r){return n.apply(this,arguments)}}(),E=function(){var n=s()(o.a.mark(function n(t,e){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!f()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,S(t);case 4:n.sent.onSnapshot(function(n){e(n.data())});case 6:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}(),C=function(){var n=s()(o.a.mark(function n(){var t,e;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!f()){n.next=2;break}return n.abrupt("return",{enabled:!1});case 2:return n.next=4,m();case 4:return t=n.sent,n.next=7,t.doc("analytics/heap").get();case 7:if(!(e=n.sent).exists){n.next=10;break}return n.abrupt("return",e.data());case 10:return n.abrupt("return",{enabled:!1});case 11:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();window.firestoreConnect={onItemChanges:E,setItemAttributes:T};var D,R=window.__rtData,M=null;window.CPFirebase={auth:function(n){D?n():d().then(function(t){t.apps.length<1&&t.initializeApp(window.__firestore.config),window.firebase=t,t.auth().signInWithCustomToken(window.__firestore.token).then(function(){D=t.database(),M=D.ref(),n()}).catch(function(n){console.log(n)})})},getFirebase:d,getRef:function(n){return M.child(R.roomID+"/"+n)}}},112:function(n,t,e){"use strict";e.d(t,"a",function(){return r});var r={PINS:"PINS"}},13:function(n,t,e){"use strict";var r=e(23),a=e.n(r),u=e(0),i=e.n(u),o=e(2),p=e.n(o),s=e(1),c=e.n(s),l=function(n){var t=n.icon,e=n.refLink,r=n.width,u=n.height,o=n.className,s=void 0===o?"":o;if(t){s=s+" icon icon-"+t;var c=e?"#"+e:"#"+t,l={};return r&&(l.width=r),u&&(l.height=u),p.a.createElement("svg",a()({},l,{className:s}),i()("use",{xlinkHref:c}))}return null};l.propTypes={icon:c.a.string.isRequired,refLink:c.a.string,className:c.a.string,width:c.a.string,height:c.a.string},t.a=l},17:function(n,t,e){"use strict";var r=e(0),a=e.n(r),u=e(11),i=e.n(u),o=e(2),p=e.n(o),s=e(1),c=e.n(s),l=e(33),f=e(12),d=e.n(f),m=e(70),g=e(185);function v(){var n=i()(["\n  mutation OpenModal($input: PopupsOpenModalInput!) {\n    popupsOpenModal(input: $input) @client\n  }\n"]);return v=function(){return n},n}var y=d()(v()),h=a()("p",{},void 0,"Loading..."),I=function(n){return p.a.createElement(l.d,n,function(t){var e=n.renderBeforeDataReady,r=n.renderWhenDataReady,u=n.loadingIndicator,i=n.children,o=n.errorHandler,p=n.showModalOnError,s=n.errorRender,c=t.loading,f=t.error;return f?(Object(m.b)(f),o&&o(),s||(p?a()(l.c,{mutation:y},void 0,function(n){return a()(g.a,{openModal:n,type:"QUERY"})}):null)):c&&!e?r?null:void 0===u?h:u:i(t)})};I.propTypes={children:c.a.oneOfType([c.a.node,c.a.func]),renderBeforeDataReady:c.a.bool,renderWhenDataReady:c.a.bool,loadingIndicator:c.a.node,errorHandler:c.a.func,showModalOnError:c.a.bool,errorRender:c.a.func},t.a=I},185:function(n,t,e){"use strict";var r=e(3),a=e.n(r),u=e(4),i=e.n(u),o=e(6),p=e.n(o),s=e(5),c=e.n(s),l=e(7),f=e.n(l),d=e(8),m=e.n(d),g=e(2),v=e(1),y=e.n(v),h=e(55),I=function(n){function t(){return a()(this,t),p()(this,c()(t).apply(this,arguments))}return f()(t,n),i()(t,[{key:"componentDidMount",value:function(){this.props.openModal({variables:{input:{type:h.a["".concat(this.props.type,"_ERROR")]}}})}},{key:"render",value:function(){return null}}]),t}(g.Component);m()(I,"propTypes",{openModal:y.a.func.isRequired,type:y.a.oneOf(["QUERY","MUTATION"]).isRequired}),t.a=I},21:function(n,t,e){"use strict";e.d(t,"a",function(){return r}),e.d(t,"b",function(){return a});var r={PEN:"PEN",PROJECT:"PROJECT",POST:"POST",COLLECTION:"COLLECTION"},a={PEN:"pen",EDITOR:"editor",FULL:"full",DETAILS:"details",DEBUG:"debug",LIVE:"live",COLLAB:"collab",PRESENTATION:"pres",PROFESSOR:"professor"}},22:function(n,t,e){"use strict";(function(n){var r=e(0),a=e.n(r),u=e(11),i=e.n(u),o=e(2),p=e.n(o),s=e(1),c=e.n(s),l=e(33),f=e(12),d=e.n(f),m=e(70),g=e(185);function v(){var n=i()(["\n  mutation OpenModal($input: PopupsOpenModalInput!) {\n    popupsOpenModal(input: $input) @client\n  }\n"]);return v=function(){return n},n}var y=d()(v()),h=function(t){return p.a.createElement(l.c,t,function(e,r){var u=r.error;return u?(function(t){console.error(t),"development"!==n.env.ENV&&Object(m.b)(t)}(u),t.errorHandler&&t.errorHandler(),t.errorRender?t.errorRender:t.showModalOnError?a()(l.c,{mutation:y},void 0,function(n){return a()(g.a,{openModal:n,type:"MUTATION"})}):null):t.children(e,r)})};h.propTypes={children:c.a.oneOfType([c.a.node,c.a.func]),errorHandler:c.a.func,showModalOnError:c.a.bool,errorRender:c.a.func},t.a=h}).call(this,e(67))},237:function(n){n.exports={__schema:{types:[{kind:"INTERFACE",name:"Item",possibleTypes:[{name:"Collection"},{name:"Pen"},{name:"Post"},{name:"Project"}]},{kind:"INTERFACE",name:"Owner",possibleTypes:[{name:"Team"},{name:"User"}]},{kind:"INTERFACE",name:"SessionContext",possibleTypes:[{name:"Team"},{name:"User"}]}]}}},49:function(n,t,e){"use strict";e.d(t,"b",function(){return a}),e.d(t,"a",function(){return u}),e.d(t,"c",function(){return i});var r=e(16),a=function n(t){return p(u,n,t)},u=function(n){return n.replace(/_\w/g,function(n){return n[1].toUpperCase()})},i=function n(t){return p(o,n,t)},o=function(n){return n.replace(/([A-Z])/g,function(n){return"_"+n.toLowerCase()})},p=function(n,t,e){return(e=e.mapKeys(function(t){return n(t)})).withMutations(function(n){var e=n.filter(function(n){return r.Iterable.isKeyed(n)}),a=n.filter(function(n){return r.Iterable.isIndexed(n)});e.map(function(e,r){n.set(r,t(n.get(r)))}),a.map(function(e,r){n.set(r,e.map(function(n,r){return t(e.get(r))}))})})}},51:function(n,t,e){"use strict";e.d(t,"a",function(){return r});var r={ORGANIZE:"Organize",PIN:"Pin",POPUPS:"Popups",MODAL:"Modal",MESSAGE:"Message",LINK:"Link",DIALOG:"Dialog",POPUP_PROP:"PopupProp",USER:"User",FEATURE_NOTIFICATION:"FeatureNotification",CLIENT_USER:"ClientUser",ITEM_LOCAL_STATE:"ItemLocalState",ITEM_IDENTIFIER:"ItemIdentifier"}},52:function(n,t,e){"use strict";var r,a=e(161),u=e(270),i=e(236),o=e(61),p=e(218),s=e(237),c=e(8),l=e.n(c),f=e(11),d=e.n(f),m=e(100),g=e(91),v=e(112),y=e(12),h=e.n(y);function I(){var n=d()(["\n  type FeatureNotification {\n    value: String!\n    showUntil: String\n  }\n\n  extend type Query {\n    featureNotifications: [String]\n  }\n\n  extend type Mutation {\n    featureNotificationsHidePinsNotification: String\n  }\n"]);return I=function(){return n},n}var w=Object(g.c)(),P=window.__user,O=h()(I()),S={featureNotificationsHidePinsNotification:function(){return m.a(P,v.a.PINS),null}},_=l()({},v.a.PINS,{value:v.a.PINS,showUntil:Object(g.a)(2018,12,1)}),b={defaults:{featureNotifications:[]},queries:{},mutations:S,typeDefs:O,initializeFirestore:function(n){P&&!P.anon&&(r=n,m.g(P,function(n){var t,e,a={featureNotifications:(t=n.featureNotifications,e=[],Object.keys(_).forEach(function(n){var r=_[n];t.includes(r.value)||w<r.showUntil&&e.push(r.value)}),e)};r.writeData({data:a})}))}};function T(){var n=d()(['\n  extend type Mutation {\n    "Makes save call to the Pen Editor"\n    itemSavePen: String\n  }\n']);return T=function(){return n},n}var E={defaults:{},queries:{},mutations:{itemSavePen:function(){return setTimeout(function(){CP.pen.save()},1),null}},typeDefs:h()(T())};function C(){var n=d()(['\n  "Item identifying information from URL"\n  type ItemIdentifier {\n    id: ID!\n    itemType: String!\n  }\n\n  extend type Query {\n    itemIdentifier: ItemIdentifier\n  }\n']);return C=function(){return n},n}var D={defaults:{itemIdentifier:null},queries:{},mutations:{},typeDefs:h()(C())},R=e(10),M=e.n(R),L=e(57),x=e(51);function k(){var n=d()(["\n  type Organize {\n    viewTypeControl: String\n    sortByControl: SortByEnum\n    sortOrderControl: SortOrderEnum\n    searchTermControl: String\n  }\n\n  input OrganizeUpdateControlsInput {\n    viewTypeControl: String\n    sortByControl: SortByEnum\n    sortOrderControl: SortOrderEnum\n    searchTermControl: String\n  }\n\n  extend type Mutation {\n    organizeUpdateControls(input: OrganizeUpdateControlsInput!): String\n  }\n\n  extend type Query {\n    organize: Organize\n  }\n"]);return k=function(){return n},n}var N,A={defaults:{organize:{__typename:x.a.ORGANIZE,viewTypeControl:L.c.PUBLIC,sortByControl:L.a.ID,sortOrderControl:L.b.DESC,searchTermControl:""}},queries:{},mutations:{organizeUpdateControls:function(n,t,e){var r=t.input,a=e.cache,u={organize:M()({__typename:x.a.ORGANIZE},r)};return a.writeData({data:u}),null}},typeDefs:h()(k())};function U(){var n=d()(["\n  input PinsAddPinInput {\n    id: ID!\n    itemType: String!\n    title: String\n  }\n\n  input PinsRemovePinInput {\n    id: ID!\n  }\n\n  type Pin {\n    id: ID!\n    itemType: String\n    title: String\n    updatedAt: String\n    url: String\n  }\n\n  extend type Query {\n    pins: [Pin]\n  }\n\n  extend type Mutation {\n    pinsAddPin(input: PinsAddPinInput!): Pin\n    pinsRemovePin(input: PinsRemovePinInput!): Pin\n  }\n"]);return U=function(){return n},n}var q=window.__user,F=h()(U()),j=function(n){return"pen"===n.itemType?"/you/pen/".concat(n.id):"post"===n.itemType?"/you/post/".concat(n.id):"project"===n.itemType?"/you/project/editor/".concat(n.id):"collection"===n.itemType?"/collection/".concat(n.id):"/you/pen/".concat(n.id)},G={defaults:{pins:[]},queries:{},mutations:{pinsAddPin:function(n,t){var e=t.input,r=e.id,a=e.itemType,u=e.title;return m.b(q,{__typename:x.a.PIN,id:r,itemType:a.toLowerCase(),title:u,updatedAt:Object(g.c)()}),{id:r,__typename:x.a.PIN}},pinsRemovePin:function(n,t){var e=t.input.id;return m.d(q,e),{id:e,__typename:x.a.PIN}}},typeDefs:F,initializeFirestore:function(n){q&&!q.anon&&(N=n,m.f(q,function(n){var t={pins:n.map(function(n){return M()({},n,{__typename:x.a.PIN,url:j(n)})})};N.writeData({data:t})}))}};function Q(){var n=d()(["\n        query PopupsToggleMenuMutationPopups {\n          popups @client {\n            id\n            menu\n          }\n        }\n      "]);return Q=function(){return n},n}function H(){var n=d()(["\n        query PopupsToggleDrawerMutationPopups {\n          popups @client {\n            id\n            drawer\n          }\n        }\n      "]);return H=function(){return n},n}function z(){var n=d()(["\n  type PopupProp {\n    name: String\n    value: String\n  }\n\n  type Modal {\n    id: ID\n    type: String\n    props: [PopupProp]\n    dismissable: Boolean\n  }\n\n  type Dialog {\n    id: ID\n    type: String\n    props: [PopupProp]\n  }\n\n  type Link {\n    url: String\n    label: String\n  }\n\n  type Message {\n    text: String\n    link: Link\n  }\n\n  type Popups {\n    id: ID\n    message: Message\n    modal: Modal\n    menu: String\n    drawer: String\n    dialog: Dialog\n  }\n\n  input PopupPropInput {\n    name: String!\n    value: String!\n  }\n\n  input PopupsOpenModalInput {\n    type: String!\n    props: [PopupPropInput]\n    dismissable: Boolean\n  }\n\n  input PopupsOpenDialogInput {\n    type: String!\n    props: [PopupPropInput]\n  }\n\n  input PopupsAddMessageLinkInput {\n    url: String\n    label: String\n  }\n\n  input PopupsAddMessageInput {\n    text: String!\n    link: PopupsAddMessageLinkInput\n  }\n\n  input PopupsDrawerInput {\n    drawer: String\n  }\n\n  input PopupsMenuInput {\n    menu: String\n  }\n\n  extend type Query {\n    popups: Popups\n  }\n  # Fun fact - GraphQL doesn't have a void type, so all local mutations\n  # need to have a return type even though in reality they return null\n  extend type Mutation {\n    popupsOpenModal(input: PopupsOpenModalInput!): String\n    popupsOpenDialog(input: PopupsOpenDialogInput!): String\n    popupsCloseModalAndDialog: String\n    popupsCloseDialog: String\n    popupsAddMessage(input: PopupsAddMessageInput!): String\n    popupsClearMessage: String\n    popupsOpenDrawer(input: PopupsDrawerInput!): String\n    popupsCloseDrawer: String\n    popupsToggleDrawer(input: PopupsDrawerInput!): String\n    popupsCloseMenu: String\n    popupsToggleMenu(input: PopupsMenuInput!): String\n  }\n"]);return z=function(){return n},n}var B={__typename:x.a.POPUPS,id:"popups"},J={defaults:{popups:{__typename:x.a.POPUPS,id:"popups",message:null,modal:null,menu:null,drawer:null,dialog:null}},queries:{},mutations:{popupsOpenModal:function(n,t,e){var r=t.input,a=r.type,u=r.props,i=r.dismissable,o=e.cache,p={popups:M()({},B,{modal:{id:"modal",__typename:x.a.MODAL,type:a,props:u||null,dismissable:!(!1===i)}})};return o.writeData({data:p}),null},popupsOpenDialog:function(n,t,e){var r=t.input,a=r.type,u=r.props,i=e.cache,o={popups:M()({},B,{dialog:{id:"dialog",__typename:x.a.DIALOG,type:a,props:u||null}})};return i.writeData({data:o}),null},popupsCloseModalAndDialog:function(n,t,e){var r=e.cache,a={popups:M()({},B,{modal:null,dialog:null})};return r.writeData({data:a}),null},popupsCloseDialog:function(n,t,e){var r=e.cache,a={popups:M()({},B,{dialog:null})};return r.writeData({data:a}),null},popupsAddMessage:function(n,t,e){var r=t.input,a=e.cache,u={popups:M()({},B,{message:M()({},r,{__typename:x.a.MESSAGE})})};return r.link?u.popups.message.link=M()({},u.popups.message.link,{__typename:x.a.LINK}):u.popups.message.link=null,a.writeData({data:u}),null},popupsClearMessage:function(n,t,e){var r=e.cache,a={popups:M()({},B,{message:null})};return r.writeData({data:a}),null},popupsOpenDrawer:function(n,t,e){var r=t.input.drawer;return e.cache.writeData({data:{popups:{__typename:x.a.POPUPS,id:"popups",drawer:r}}}),null},popupsCloseDrawer:function(n,t,e){return e.cache.writeData({data:{popups:{__typename:x.a.POPUPS,id:"popups",drawer:null}}}),null},popupsToggleDrawer:function(n,t,e){var r=t.input.drawer,a=e.cache,u=a.readQuery({query:h()(H())}).popups.drawer===r;return a.writeData({data:{popups:{__typename:x.a.POPUPS,id:"popups",drawer:u?null:r}}}),null},popupsCloseMenu:function(n,t,e){return e.cache.writeData({data:{popups:{__typename:x.a.POPUPS,id:"popups",menu:null}}}),null},popupsToggleMenu:function(n,t,e){var r=t.input.menu,a=e.cache,u=a.readQuery({query:h()(Q())}).popups.menu===r;return a.writeData({data:{popups:{__typename:x.a.POPUPS,id:"popups",menu:u?null:r}}}),null}},typeDefs:h()(z())},V=e(38),K=e(21);function Y(){var n=d()(["\n      fragment privacy on Pen {\n        private\n        __typename\n      }\n    "]);return Y=function(){return n},n}function W(){var n=d()(["\n      query Item {\n        itemIdentifier @client {\n          id\n        }\n      }\n    "]);return W=function(){return n},n}function Z(){var n=d()(['\n  "Item state that exists in the Editor but hasn\'t been saved yet"\n  type ItemLocalState {\n    title: String\n  }\n\n  input LocalStateObjectInput {\n    title: String\n  }\n\n  input ItemLocalStateUpdateStateInput {\n    itemType: ItemEnum!\n    state: LocalStateObjectInput!\n  }\n\n  extend type Mutation {\n    "Syncs local state back to the Item\'s Editor data stores"\n    itemLocalStateUpdateState(input: ItemLocalStateUpdateStateInput!): String\n  }\n\n  extend type Query {\n    itemLocalState: ItemLocalState\n  }\n']);return Z=function(){return n},n}var $,X={itemLocalState:{__typename:x.a.ITEM_LOCAL_STATE,title:null}},nn=h()(Z()),tn=function(n){window.Hub&&(Hub.sub("pen-change",function(t,e){return rn(e,n)}),Hub.sub("pen-saved",function(t,e){return un(e,n)}))},en=function(n){window.Hub&&Hub.sub("project-change",function(t,e){return rn(e,n)})},rn=function(n,t){var e=an(n);0!==Object.keys(e).length&&t.writeData({data:{itemLocalState:M()({__typename:x.a.ITEM_LOCAL_STATE},e)}})},an=function(n){return n.item?Object.keys(X.itemLocalState).reduce(function(t,e){return void 0!==n.item[e]&&(t[e]=n.item[e]),t},{}):{}},un=function(n,t){var e=t.readQuery({query:h()(W())}).itemIdentifier,r=t.readFragment({id:"Pen:".concat(e.id),fragment:h()(Y())});if(n.pen&&n.pen.private&&n.pen.private.current!==r.private){var a=!0===n.pen.private.current?CP.item.slug_hash_private:CP.item.slug_hash,u=window.location.pathname.replace(e.id,a);Object(V.d)(u)}},on={defaults:X,queries:{},mutations:{itemLocalStateUpdateState:function(n,t){var e=t.input,r=e.state,a=e.itemType;return a===K.a.PEN&&CP.item.setItemValue({origin:"client",item:r}),a===K.a.PROJECT&&window.projectStore.dispatch({type:"UPDATE_PROJECT",payload:{newSettings:r}}),null}},typeDefs:nn,subscribeToItemEvents:function(n){tn(n),en(n)}},pn=[b,E,D,on,A,G,J],sn=function(n,t){var e=[{}].concat(t.map(function(t){return t[n]}));return Object.assign.apply(null,e)},cn=sn("defaults",pn),ln={Query:sn("queries",pn),Mutation:sn("mutations",pn)},fn=pn.map(function(n){return n.typeDefs}).filter(function(n){return void 0!==n});e.d(t,"a",function(){return hn});var dn=new p.b({introspectionQueryResultData:s}),mn=new p.a({fragmentMatcher:dn});window.__graphql&&mn.writeData(window.__graphql);var gn,vn=Object(i.a)(function(n){var t=n.graphQLErrors,e=n.networkError;if(console.log(JSON.stringify(t,null,4)),t){if(t.error)return console.log("[GraphQL error]: ".concat(t.error));t.map(function(n){var t=n.message,e=n.locations,r=n.fields,a=n.path;console.log(e),console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(e[0],", Fields: ").concat(r,", Path: ").concat(a))})}e&&console.log("[Network error]: ".concat(e))}),yn=new u.a({credentials:"same-origin",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},uri:"/graphql",batchInterval:20}),hn=($||($=new a.a({link:o.a.from([vn,yn]),cache:mn,typeDefs:fn,resolvers:ln}),mn.writeData({data:cn}),b.initializeFirestore(gn=$),G.initializeFirestore(gn),function(n){on.subscribeToItemEvents(n)}($)),window.apolloClient=$,$)},55:function(n,t,e){"use strict";e.d(t,"a",function(){return r});var r={PROJECT_LIMIT:"PROJECT_LIMIT",LOG_IN_TO_CREATE_PROJECTS:"LOG_IN_TO_CREATE_PROJECTS",LOG_IN_TO_CREATE_POSTS:"LOG_IN_TO_CREATE_POSTS",LOG_IN_TO_CREATE_COLLECTION:"LOG_IN_TO_CREATE_COLLECTION",CONFIRM_LOGOUT:"CONFIRM_LOGOUT",QUERY_ERROR:"QUERY_ERROR",MUTATION_ERROR:"MUTATION_ERROR"}},57:function(n,t,e){"use strict";e.d(t,"c",function(){return r}),e.d(t,"a",function(){return a}),e.d(t,"b",function(){return u});var r={PUBLIC:"PUBLIC",POPULAR:"POPULAR",TAG:"TAG",SEARCH:"SEARCH"},a={ID:"ID",POPULARITY:"POPULARITY"},u={ASC:"ASC",DESC:"DESC"}},70:function(n,t,e){"use strict";(function(n){e.d(t,"a",function(){return l}),e.d(t,"b",function(){return f});var r,a=e(41),u=e.n(a),i=e(63),o=e.n(i),p="production"!==n.env.ENV,s="test"!==n.env.ENV,c=function(){var t=o()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!p){t.next=2;break}return t.abrupt("return");case 2:if(!r){t.next=4;break}return t.abrupt("return",r);case 4:return t.next=6,e.e(18).then(e.t.bind(null,1409,7));case 6:(r=t.sent).configure({apiKey:"32c374f5",environment:n.env.ENV,revision:n.env.CI_COMMIT_SHA});case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),l=function(){var n=o()(u.a.mark(function n(t){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!p){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,c();case 4:r.setContext(t);case 5:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}(),f=function(){var n=o()(u.a.mark(function n(t){var e,a=arguments;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=a.length>1&&void 0!==a[1]?a[1]:{},!p){n.next=4;break}return s&&console.error({error:t,data:e}),n.abrupt("return");case 4:return n.next=6,c();case 6:r.notify(t,e);case 7:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}();p||c()}).call(this,e(67))},91:function(n,t,e){"use strict";e.d(t,"c",function(){return a}),e.d(t,"a",function(){return u}),e.d(t,"b",function(){return i});var r=function(n){return Math.floor(n/1e3)},a=function(){return r(Date.now())},u=function(n,t,e){if(!/\d\d\d\d/.test(n+"")||t>12||e>31)throw"Invalid date ".concat(n,", ").concat(t,", ").concat(e);return r(new Date("".concat(n,".").concat(t,".").concat(e)).getTime())},i=function(n){return Math.floor((a()-n)/60/60/24)}}}]);
//# sourceMappingURL=1-cd64d8c81cb1b0d5ddfe.chunk.js.map